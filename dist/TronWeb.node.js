module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=21)}([function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@babel/runtime/helpers/objectSpread")},function(e,t){e.exports=require("ethers")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("bignumber.js")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("js-sha3")},function(e,t){e.exports=require("elliptic")},function(e,t){e.exports=require("@babel/runtime/helpers/typeof")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("jssha")},function(e,t){e.exports=require("validator")},function(e,t){e.exports=require("eventemitter3")},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"byte2hexStr",function(){return j}),r.d(n,"bytesToString",function(){return F}),r.d(n,"hextoString",function(){return H}),r.d(n,"byteArray2hexStr",function(){return q}),r.d(n,"base64DecodeFromString",function(){return D}),r.d(n,"base64EncodeToString",function(){return K});var i={};r.r(i),r.d(i,"bin2String",function(){return J}),r.d(i,"arrayEquals",function(){return G}),r.d(i,"stringToBytes",function(){return Y}),r.d(i,"byte2hexStr",function(){return j}),r.d(i,"bytesToString",function(){return F}),r.d(i,"hextoString",function(){return H}),r.d(i,"byteArray2hexStr",function(){return q}),r.d(i,"base64DecodeFromString",function(){return D}),r.d(i,"base64EncodeToString",function(){return K}),r.d(i,"hexChar2byte",function(){return X}),r.d(i,"isHexChar",function(){return Z}),r.d(i,"hexStr2byteArray",function(){return Q}),r.d(i,"strToDate",function(){return $}),r.d(i,"isNumber",function(){return ee}),r.d(i,"getStringType",function(){return te});var s={};r.r(s),r.d(s,"encode58",function(){return oe}),r.d(s,"decode58",function(){return ae});var o={};r.r(o),r.d(o,"getBase58CheckAddress",function(){return ce}),r.d(o,"decodeBase58Address",function(){return le}),r.d(o,"signTransaction",function(){return he}),r.d(o,"arrayToBase64String",function(){return fe}),r.d(o,"signBytes",function(){return ve}),r.d(o,"getRowBytesFromTransactionBase64",function(){return pe}),r.d(o,"genPriKey",function(){return ge}),r.d(o,"computeAddress",function(){return be}),r.d(o,"getAddressFromPriKey",function(){return me}),r.d(o,"decode58Check",function(){return ye}),r.d(o,"isAddressValid",function(){return xe}),r.d(o,"getBase58CheckAddressFromPriKeyBase64String",function(){return ke}),r.d(o,"getHexStrAddressFromPriKeyBase64String",function(){return we}),r.d(o,"getAddressFromPriKeyBase64String",function(){return Ie}),r.d(o,"getPubKeyFromPriKey",function(){return We}),r.d(o,"ECKeySign",function(){return Ae}),r.d(o,"SHA256",function(){return Se}),r.d(o,"passwordToAddress",function(){return Pe}),r.d(o,"pkToAddress",function(){return Ne});var a={};r.r(a),r.d(a,"generateAccount",function(){return Ee});var u={};r.r(u),r.d(u,"decodeParams",function(){return Be}),r.d(u,"encodeParams",function(){return Ce});var d=r(13),c=r.n(d),l=r(0),h=r.n(l),f=r(1),v=r.n(f),p=r(2),g=r.n(p),b=r(3),m=r.n(b),y=r(14),x=r.n(y),k=r(15),w=r.n(k),I=r(16),W=r.n(I),A=r(8),S=r.n(A),P=r(10),N=r.n(P),E=r(17),T=r.n(E),_=r(4),B=r.n(_);function C(){var e=this;this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(t){for(var r,n,i,s,o,a,u,d="",c=0;c<t.length;)s=(r=t.charCodeAt(c++))>>2,o=(3&r)<<4|(n=t.charCodeAt(c++))>>4,a=(15&n)<<2|(i=t.charCodeAt(c++))>>6,u=63&i,isNaN(n)?a=u=64:isNaN(i)&&(u=64),d=d+e._keyStr.charAt(s)+e._keyStr.charAt(o)+e._keyStr.charAt(a)+e._keyStr.charAt(u);return d},this.encodeIgnoreUtf8=function(t){for(var r,n,i,s,o,a,u,d="",c=0;c<t.length;)s=(r=t[c++])>>2,o=(3&r)<<4|(n=t[c++])>>4,a=(15&n)<<2|(i=t[c++])>>6,u=63&i,isNaN(n)?a=u=64:isNaN(i)&&(u=64),d=d+e._keyStr.charAt(s)+e._keyStr.charAt(o)+e._keyStr.charAt(a)+e._keyStr.charAt(u);return d},this.decode=function(t){var r,n,i,s,o,a,u="",d=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<t.length;)r=e._keyStr.indexOf(t.charAt(d++))<<2|(s=e._keyStr.indexOf(t.charAt(d++)))>>4,n=(15&s)<<4|(o=e._keyStr.indexOf(t.charAt(d++)))>>2,i=(3&o)<<6|(a=e._keyStr.indexOf(t.charAt(d++))),u+=String.fromCharCode(r),64!=o&&(u+=String.fromCharCode(n)),64!=a&&(u+=String.fromCharCode(i));return e._utf8_decode(u)},this.decodeToByteArray=function(t){var r,n,i,s,o,a,u="",d=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<t.length;)r=e._keyStr.indexOf(t.charAt(d++))<<2|(s=e._keyStr.indexOf(t.charAt(d++)))>>4,n=(15&s)<<4|(o=e._keyStr.indexOf(t.charAt(d++)))>>2,i=(3&o)<<6|(a=e._keyStr.indexOf(t.charAt(d++))),u+=String.fromCharCode(r),64!=o&&(u+=String.fromCharCode(n)),64!=a&&(u+=String.fromCharCode(i));return e._out2ByteArray(u)},this._out2ByteArray=function(e){for(var t=new Array(e.length),r=0,n=0;r<e.length;)n=e.charCodeAt(r),t[r]=n,r++;return t},this._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},this._utf8_decode=function(e){for(var t="",r=0,n=0,i=0,s=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(i=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&i),r+=2):(i=e.charCodeAt(r+1),s=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s),r+=3);return t}}function j(e){if("number"!=typeof e)throw new Error("Input must be a number");if(e<0||e>255)throw new Error("Input must be a byte");var t="";return t+="0123456789ABCDEF".charAt(e>>4),t+="0123456789ABCDEF".charAt(15&e)}function F(e){if("string"==typeof e)return e;for(var t="",r=0;r<e.length;r++){var n=e[r].toString(2),i=n.match(/^1+?(?=0)/);if(i&&8===n.length){for(var s=i[0].length,o=e[r].toString(2).slice(7-s),a=1;a<s;a++)o+=e[a+r].toString(2).slice(2);t+=String.fromCharCode(parseInt(o,2)),r+=s-1}else t+=String.fromCharCode(e[r])}return t}function H(e){for(var t=e.replace(/^0x/,"").split(""),r="",n=0;n<t.length/2;n++){var i="0x".concat(t[2*n]).concat(t[2*n+1]);r+=String.fromCharCode(i)}return r}function q(e){for(var t="",r=0;r<e.length;r++)t+=j(e[r]);return t}function D(e){return(new C).decodeToByteArray(e)}function K(e){return(new C).encodeIgnoreUtf8(e)}var R=r(6),U=r.n(R),O=r(18),L=r.n(O),z=34,V="41",M=65;function J(e){return F(e)}function G(e,t,r){if(e.length!=t.length)return!1;var n;for(n=0;n<e.length;n++)if(r){if(e[n]!=t[n])return!1}else if(JSON.stringify(e[n])!=JSON.stringify(t[n]))return!1;return!0}function Y(e){if("string"!=typeof e)throw new Error("The passed string is not a string");var t,r,n=new Array;t=e.length;for(var i=0;i<t;i++)(r=e.charCodeAt(i))>=65536&&r<=1114111?(n.push(r>>18&7|240),n.push(r>>12&63|128),n.push(r>>6&63|128),n.push(63&r|128)):r>=2048&&r<=65535?(n.push(r>>12&15|224),n.push(r>>6&63|128),n.push(63&r|128)):r>=128&&r<=2047?(n.push(r>>6&31|192),n.push(63&r|128)):n.push(255&r);return n}function X(e){var t;if(e>="A"&&e<="F"?t=e.charCodeAt(0)-"A".charCodeAt(0)+10:e>="a"&&e<="f"?t=e.charCodeAt(0)-"a".charCodeAt(0)+10:e>="0"&&e<="9"&&(t=e.charCodeAt(0)-"0".charCodeAt(0)),"number"==typeof t)return t;throw new Error("The passed hex char is not a valid hex char")}function Z(e){return e>="A"&&e<="F"||e>="a"&&e<="f"||e>="0"&&e<="9"?1:0}function Q(e){if("string"!=typeof e)throw new Error("The passed string is not a string");for(var t=Array(),r=0,n=0,i=0,s=0;s<e.length;s++){var o=e.charAt(s);if(!Z(o))throw new Error("The passed hex char is not a valid hex string");r<<=4,r+=X(o),0==++n%2&&(t[i++]=r,r=0)}return t}function $(e){if(!/^\d{4}-\d{2}-\d{2}( \d{2}-\d{2}-\d{2}|)/.test(e))throw new Error("The passed date string is not valid");var t=e.split(" "),r=t[0].split("-"),n=parseInt(r[0],10),i=parseInt(r[1],10)-1,s=parseInt(r[2],10);if(t.length>1){var o=t[1].split("-"),a=parseInt(o[0],10),u=parseInt(o[1],10),d=parseInt(o[2],10);return new Date(n,i,s,a,u,d)}return new Date(n,i,s)}function ee(e){return e>="0"&&e<="9"?1:0}function te(e){if(null==e)return-1;if("string"!=typeof e)return-1;if(0==e.length||""==e)return-1;var t=0;if(40==e.length)for(;t<40;t++){if(!Z(e.charAt(t)))break}if(40==t)return 1;for(t=0;t<e.length;t++){if(!ee(e.charAt(t)))break}if(t==e.length)return 2;for(t=0;t<e.length;t++){if(e.charAt(t)>" ")return 3}return-1}for(var re="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ne={},ie=0;ie<re.length;ie++)ne[re.charAt(ie)]=ie;var se=58;function oe(e){if(0===e.length)return"";var t,r,n=[0];for(t=0;t<e.length;t++){for(r=0;r<n.length;r++)n[r]<<=8;n[0]+=e[t];var i=0;for(r=0;r<n.length;++r)n[r]+=i,i=n[r]/se|0,n[r]%=se;for(;i;)n.push(i%se),i=i/se|0}for(t=0;0===e[t]&&t<e.length-1;t++)n.push(0);return n.reverse().map(function(e){return re[e]}).join("")}function ae(e){if(0===e.length)return[];var t,r,n=[0];for(t=0;t<e.length;t++){var i=e[t];if(!(i in ne))throw new Error("Non-base58 character");for(r=0;r<n.length;r++)n[r]*=se;n[0]+=ne[i];var s=0;for(r=0;r<n.length;++r)n[r]+=s,s=n[r]>>8,n[r]&=255;for(;s;)n.push(255&s),s>>=8}for(t=0;"1"===e[t]&&t<e.length-1;t++)n.push(0);return n.reverse()}var ue=r(11),de=r(12);function ce(e){var t=Se(Se(e)).slice(0,4);return oe(t=e.concat(t))}function le(e){if("string"!=typeof e)return!1;if(e.length<=4)return!1;var t=ae(e);if(e.length<=4)return!1;var r=t.length-4,n=t.slice(r),i=Se(Se(t=t.slice(0,r))).slice(0,4);if(n[0]==i[0]&&n[1]==i[1]&&n[2]==i[2]&&n[3]==i[3])return t;throw new Error("Invalid address provided")}function he(e,t){"string"==typeof e&&(e=Q(e));var r=Ae(Q(t.txID),e);return t.signature=[r],t}function fe(e){return btoa(String.fromCharCode.apply(String,U()(e)))}function ve(e,t){return"string"==typeof e&&(e=Q(e)),Ae(Se(t),e)}function pe(e){var t=D(e);return proto.protocol.Transaction.deserializeBinary(t).getRawData().serializeBinary()}function ge(){for(var e=new de.ec("secp256k1").genKeyPair().getPrivate().toString("hex");e.length<64;)e="0".concat(e);return Q(e)}function be(e){65===e.length&&(e=e.slice(1));var t=Object(ue.keccak256)(e).toString();return Q(V+t.substring(24))}function me(e){return be(We(e))}function ye(e){var t=ae(e);if(t.length<=4)return!1;var r=t.slice(0,t.length-4),n=Se(Se(r));return n[0]===t[r.length]&&n[1]===t[r.length+1]&&n[2]===t[r.length+2]&&n[3]===t[r.length+3]&&r}function xe(e){if("string"!=typeof e)return!1;if(e.length!==z)return!1;var t=ae(e);if(25!==t.length)return!1;if(t[0]!==M)return!1;var r=t.slice(21),n=Se(Se(t=t.slice(0,21))).slice(0,4);return r[0]==n[0]&&r[1]==n[1]&&r[2]==n[2]&&r[3]==n[3]}function ke(e){return ce(be(We(D(e))))}function we(e){return q(be(We(D(e))))}function Ie(e){return K(be(We(D(e))))}function We(e){for(var t=new de.ec("secp256k1").keyFromPrivate(e,"bytes").getPublic(),r=t.x,n=t.y,i=r.toString("hex");i.length<64;)i="0".concat(i);for(var s=n.toString("hex");s.length<64;)s="0".concat(s);return Q("04".concat(i).concat(s))}function Ae(e,t){for(var r=new de.ec("secp256k1").keyFromPrivate(t,"bytes").sign(e),n=r.r,i=r.s,s=r.recoveryParam,o=n.toString("hex");o.length<64;)o="0".concat(o);for(var a=i.toString("hex");a.length<64;)a="0".concat(a);return o+a+j(s)}function Se(e){var t=new L.a("SHA-256","HEX"),r=q(e);return t.update(r),Q(t.getHash("HEX"))}function Pe(e){return ce(me(D(e)))}function Ne(e){return ce(me(Q(e)))}function Ee(){var e=ge(),t=We(e),r=me(e);return{privateKey:q(e),publicKey:q(t),address:{base58:ce(r),hex:q(r)}}}var Te=r(5),_e=new Te.utils.AbiCoder;function Be(e,t,r,n){if(r&&"boolean"!=typeof r||(n=r,r=t,t=e,e=[]),n&&r.replace(/^0x/,"").length%64==8&&(r="0x"+r.replace(/^0x/,"").substring(8)),r.replace(/^0x/,"").length%64)throw new Error("The encoded string is not valid. Its length must be a multiple of 64.");return _e.decode(t,r).reduce(function(r,n,i){return"address"==t[i]&&(n="41"+n.substr(2).toLowerCase()),e.length?r[e[i]]=n:r.push(n),r},e.length?{}:[])}function Ce(e,t){for(var r=0;r<e.length;r++)"address"===e[r]&&(t[r]=Qe.address.toHex(t[r]).replace(/^41/,"0x"));return _e.encode(e,t)}var je=r(19),Fe=r.n(je),He=r(7),qe=r.n(He),De={isValidURL:function(e){return"string"==typeof e&&Fe.a.isURL(e.toString(),{protocols:["http","https"]})},isObject:function(e){return e===Object(e)&&"[object Array]"!==Object.prototype.toString.call(e)},isArray:function(e){return Array.isArray(e)},isJson:function(e){try{return!!JSON.parse(e)}catch(e){return!1}},isBoolean:function(e){return"boolean"==typeof e},isBigNumber:function(e){return e&&(e instanceof qe.a||e.constructor&&"BigNumber"===e.constructor.name)},isString:function(e){return"string"==typeof e||e&&e.constructor&&"String"===e.constructor.name},isFunction:function(e){return"function"==typeof e},isHex:function(e){return"string"==typeof e&&!isNaN(parseInt(e,16))&&/^(0x|)[a-fA-F0-9]+$/.test(e)},isInteger:function(e){return Number.isInteger(Number(e))},hasProperty:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},hasProperties:function(e){for(var t=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.length&&!n.map(function(r){return t.hasProperty(e,r)}).includes(!1)},injectPromise:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new Promise(function(t,n){e.apply(void 0,r.concat([function(e,r){e?n(e):t(r)}]))})},promiseInjector:function(e){var t=this;return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return t.injectPromise.apply(t,[r.bind(e)].concat(i))}},mapEvent:function(e){return{block:e.block_number,timestamp:e.block_timestamp,contract:e.contract_address,name:e.event_name,transaction:e.transaction_id,result:e.result,resourceNode:e.resource_Node}},parseEvent:function(e,t){var r=t.inputs;if(!e.result)return e;if(this.isObject(e.result))for(var n=0;n<r.length;n++){var i=r[n];"address"==i.type&&i.name in e.result&&(e.result[i.name]="41"+e.result[i.name].substr(2).toLowerCase())}else this.isArray(e.result)&&(e.result=e.result.reduce(function(e,t,n){var i=r[n],s=i.name;return"address"==i.type&&(t="41"+t.substr(2).toLowerCase()),e[s]=t,e},{}));return e},padLeft:function(e,t,r){for(var n=e.toString();n.length<r;)n=t+n;return n}},Ke=B()({},De,{code:i,accounts:a,base58:s,bytes:n,crypto:o,abi:u}),Re={HttpProvider:function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"/";if(g()(this,e),!Ke.isValidURL(t))throw new Error("Invalid URL provided to HttpProvider");if(isNaN(r)||r<0)throw new Error("Invalid timeout duration provided");if(!Ke.isObject(s))throw new Error("Invalid headers object provided");t=t.replace(/\/+$/,""),this.host=t,this.timeout=r,this.user=n,this.password=i,this.headers=s,this.statusPage=o,this.instance=T.a.create({baseURL:t,timeout:r,headers:s,auth:n&&{user:n,password:i}})}return m()(e,[{key:"setStatusPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";this.statusPage=e}},{key:"isConnected",value:function(){var e=v()(h.a.mark(function e(){var t,r=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:this.statusPage,e.abrupt("return",this.request(t).then(function(e){return Ke.hasProperties(e,"blockID","block_header")}).catch(function(){return!1}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";return r=r.toLowerCase(),this.instance.request({data:"post"==r&&t,params:"get"==r&&t,url:e,method:r}).then(function(e){return e.data})}}]),e}()},Ue=r(20),Oe=r.n(Ue),Le=r(9),ze=r.n(Le),Ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(g()(this,e),!t||!t instanceof Qe)throw new Error("Expected instance of TronWeb");this.tronWeb=t,this.injectPromise=Ke.promiseInjector(this)}return m()(e,[{key:"sendTrx",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.tronWeb.defaultAddress.hex,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ke.isFunction(r)&&(n=r,r=this.tronWeb.defaultAddress.hex),n?this.tronWeb.isAddress(e)?!Ke.isInteger(t)||t<=0?n("Invalid amount provided"):this.tronWeb.isAddress(r)?(e=this.tronWeb.address.toHex(e))===(r=this.tronWeb.address.toHex(r))?n("Cannot transfer TRX to the same account"):void this.tronWeb.fullNode.request("wallet/createtransaction",{to_address:e,owner_address:r,amount:parseInt(t)},"post").then(function(e){if(e.Error)return n(e.Error);n(null,e)}).catch(function(e){return n(e)}):n("Invalid origin address provided"):n("Invalid recipient address provided"):this.injectPromise(this.sendTrx,e,t,r)}},{key:"sendToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.tronWeb.defaultAddress.hex,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ke.isFunction(n)&&(i=n,n=this.tronWeb.defaultAddress.hex),i?this.tronWeb.isAddress(e)?!Ke.isInteger(t)||t<=0?i("Invalid amount provided"):Ke.isString(r)&&r.length?this.tronWeb.isAddress(n)?(e=this.tronWeb.address.toHex(e),r=this.tronWeb.fromUtf8(r),e===(n=this.tronWeb.address.toHex(n))?i("Cannot transfer tokens to the same account"):void this.tronWeb.fullNode.request("wallet/transferasset",{to_address:e,owner_address:n,asset_name:r,amount:parseInt(t)},"post").then(function(e){if(e.Error)return i(e.Error);i(null,e)}).catch(function(e){return i(e)})):i("Invalid origin address provided"):i("Invalid token ID provided"):i("Invalid recipient address provided"):this.injectPromise(this.sendToken,e,t,r,n)}},{key:"purchaseToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.tronWeb.defaultAddress.hex,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ke.isFunction(n)&&(i=n,n=this.tronWeb.defaultAddress.hex),i?this.tronWeb.isAddress(e)?Ke.isString(t)&&t.length?!Ke.isInteger(r)||r<=0?i("Invalid amount provided"):this.tronWeb.isAddress(n)?void this.tronWeb.fullNode.request("wallet/participateassetissue",{to_address:this.tronWeb.address.toHex(e),owner_address:this.tronWeb.address.toHex(n),asset_name:this.tronWeb.fromUtf8(t),amount:parseInt(r)},"post").then(function(e){if(e.Error)return i(e.Error);i(null,e)}).catch(function(e){return i(e)}):i("Invalid buyer address provided"):i("Invalid token ID provided"):i("Invalid issuer address provided"):this.injectPromise(this.purchaseToken,e,t,r,n)}},{key:"freezeBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BANDWIDTH",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.tronWeb.defaultAddress.hex,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ke.isFunction(n)&&(i=n,n=this.tronWeb.defaultAddress.hex),Ke.isFunction(t)&&(i=t,t=3),Ke.isFunction(r)&&(i=r,r="BANDWIDTH"),i?["BANDWIDTH","ENERGY"].includes(r)?!Ke.isInteger(e)||e<=0?i("Invalid amount provided"):!Ke.isInteger(t)||t<3?i("Invalid duration provided, minimum of 3 days"):this.tronWeb.isAddress(n)?void this.tronWeb.fullNode.request("wallet/freezebalance",{owner_address:this.tronWeb.address.toHex(n),frozen_balance:parseInt(e),frozen_duration:parseInt(t),resource:r},"post").then(function(e){if(e.Error)return i(e.Error);i(null,e)}).catch(function(e){return i(e)}):i("Invalid address provided"):i('Invalid resource provided: Expected "BANDWIDTH" or "ENERGY"'):this.injectPromise(this.freezeBalance,e,t,r,n)}},{key:"unfreezeBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BANDWIDTH",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tronWeb.defaultAddress.hex,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ke.isFunction(t)&&(r=t,t=this.tronWeb.defaultAddress.hex),Ke.isFunction(e)&&(r=e,e="BANDWIDTH"),r?["BANDWIDTH","ENERGY"].includes(e)?this.tronWeb.isAddress(t)?void this.tronWeb.fullNode.request("wallet/unfreezebalance",{owner_address:this.tronWeb.address.toHex(t),resource:e},"post").then(function(e){if(e.Error)return r(e.Error);r(null,e)}).catch(function(e){return r(e)}):r("Invalid address provided"):r('Invalid resource provided: Expected "BANDWIDTH" or "ENERGY"'):this.injectPromise(this.unfreezeBalance,e,t)}},{key:"withdrawBlockRewards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ke.isFunction(e)&&(t=e,e=this.tronWeb.defaultAddress.hex),t?this.tronWeb.isAddress(e)?void this.tronWeb.fullNode.request("wallet/withdrawbalance",{owner_address:this.tronWeb.address.toHex(e)},"post").then(function(e){if(e.Error)return t(e.Error);t(null,e)}).catch(function(e){return t(e)}):t("Invalid address provided"):this.injectPromise(this.withdrawBlockRewards,e)}},{key:"applyForSR",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ke.isValidURL(e)&&(r=t||!1,t=e,e=this.tronWeb.defaultAddress.hex),r?this.tronWeb.isAddress(e)?Ke.isValidURL(t)?void this.tronWeb.fullNode.request("wallet/createwitness",{owner_address:this.tronWeb.address.toHex(e),url:this.tronWeb.fromUtf8(t)},"post").then(function(e){if(e.Error)return r(e.Error);r(null,e)}).catch(function(e){return r(e)}):r("Invalid url provided"):r("Invalid address provided"):this.injectPromise(this.applyForSR,e,t)}},{key:"vote",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tronWeb.defaultAddress.hex,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ke.isFunction(r)&&(n=r,r=this.tronWeb.defaultAddress.hex),!n)return this.injectPromise(this.vote,t,r);if(!Ke.isObject(t)||!Object.keys(t).length)return n("Invalid votes object provided");if(!this.tronWeb.isAddress(r))return n("Invalid voter address provided");var i=!1;t=Object.entries(t).map(function(t){var r=ze()(t,2),s=r[0],o=r[1];if(!i)return e.tronWeb.isAddress(s)?!Ke.isInteger(o)||o<=0?(n("Invalid vote count provided for SR: "+s),i=!0):{vote_address:e.tronWeb.address.toHex(s),vote_count:parseInt(o)}:(n("Invalid SR address provided: "+s),i=!0)}),i||this.tronWeb.fullNode.request("wallet/votewitnessaccount",{owner_address:this.tronWeb.address.toHex(r),votes:t},"post").then(function(e){if(e.Error)return n(e.Error);n(null,e)}).catch(function(e){return n(e)})}},{key:"createSmartContract",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tronWeb.defaultAddress.hex,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ke.isFunction(t)&&(r=t,t=this.tronWeb.defaultAddress.hex),!r)return this.injectPromise(this.createSmartContract,e,t);var n=e.abi,i=void 0!==n&&n,s=e.bytecode,o=void 0!==s&&s,a=e.feeLimit,u=void 0===a?1e9:a,d=e.callValue,c=void 0===d?0:d,l=e.userFeePercentage,h=void 0===l?0:l,f=e.parameters,v=void 0===f?[]:f,p=e.name,g=void 0===p?"":p;if(i&&Ke.isString(i))try{i=JSON.parse(i)}catch(e){return r("Invalid options.abi provided")}if(!Ke.isArray(i))return r("Invalid options.abi provided");var b=i.some(function(e){return"constructor"==e.type&&e.payable});if(!Ke.isHex(o))return r("Invalid options.bytecode provided");if(!Ke.isInteger(u)||u<=0||u>1e9)return r("Invalid options.feeLimit provided");if(!Ke.isInteger(c)||c<0)return r("Invalid options.callValue provided");if(b&&0==c)return r("When contract is payable, options.callValue must be a positive integer");if(!b&&c>0)return r("When contract is not payable, options.callValue must be 0");if(!Ke.isInteger(h)||h<0||h>100)return r("Invalid options.userFeePercentage provided");if(!Ke.isArray(v))return r("Invalid parameters provided");if(!this.tronWeb.isAddress(t))return r("Invalid issuer address provided");var m=i.find(function(e){return"constructor"===e.type});if(void 0!==m&&m){var y=new Te.utils.AbiCoder,x=[],k=[];if(m=m.inputs,v.length!=m.length)return r("constructor needs ".concat(m.length," but ").concat(v.length," provided"));for(var w=0;w<v.length;w++){var I=m[w].type,W=v[w];if(!I||!Ke.isString(I)||!I.length)return r("Invalid parameter type provided: "+I);"address"==I&&(W=this.tronWeb.address.toHex(W).replace(/^(41)/,"0x")),x.push(I),k.push(W)}try{v=y.encode(x,k).replace(/^(0x)/,"")}catch(e){return r(e)}}else v="";this.tronWeb.fullNode.request("wallet/deploycontract",{owner_address:this.tronWeb.address.toHex(t),fee_limit:parseInt(u),call_value:parseInt(c),consume_user_resource_percent:h,abi:JSON.stringify(i),bytecode:o,parameter:v,name:g},"post").then(function(e){if(e.Error)return r(e.Error);r(null,e)}).catch(function(e){return r(e)})}},{key:"triggerSmartContract",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e9,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.tronWeb.defaultAddress.hex,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(Ke.isFunction(o)&&(a=o,o=this.tronWeb.defaultAddress.hex),Ke.isFunction(s)&&(a=s,s=[]),Ke.isFunction(i)&&(a=i,i=0),Ke.isFunction(n)&&(a=n,n=1e9),!a)return this.injectPromise(this.triggerSmartContract,e,t,n,i,s,o);if(!this.tronWeb.isAddress(e))return a("Invalid contract address provided");if(!Ke.isString(t)||!t.length)return a("Invalid function selector provided");if(!Ke.isInteger(i)||i<0)return a("Invalid call value provided");if(!Ke.isInteger(n)||n<=0||n>1e9)return a("Invalid fee limit provided");if(!Ke.isArray(s))return a("Invalid parameters provided");if(!this.tronWeb.isAddress(o))return a("Invalid issuer address provided");if(t=t.replace("/s*/g",""),s.length){for(var u=new Te.utils.AbiCoder,d=[],c=[],l=0;l<s.length;l++){var h=s[l],f=h.type,v=h.value;if(!f||!Ke.isString(f)||!f.length)return a("Invalid parameter type provided: "+f);"address"==f&&(v=this.tronWeb.address.toHex(v).replace(/^(41)/,"0x")),d.push(f),c.push(v)}try{s=u.encode(d,c).replace(/^(0x)/,"")}catch(e){return a(e)}}else s="";this.tronWeb.fullNode.request("wallet/triggersmartcontract",{contract_address:this.tronWeb.address.toHex(e),owner_address:this.tronWeb.address.toHex(o),function_selector:t,fee_limit:parseInt(n),call_value:parseInt(i),parameter:s},"post").then(function(e){return e.Error?a(e.Error):e.result&&e.result.message?a(r.tronWeb.toUtf8(e.result.message)):e.result.result?void a(null,e):a(e)}).catch(function(e){return a(e)})}},{key:"createToken",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tronWeb.defaultAddress.hex,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ke.isFunction(r)&&(n=r,r=this.tronWeb.defaultAddress.hex),!n)return this.injectPromise(this.createToken,t,r);var i=t.name,s=void 0!==i&&i,o=t.abbreviation,a=void 0!==o&&o,u=t.description,d=void 0!==u&&u,c=t.url,l=void 0!==c&&c,h=t.totalSupply,f=void 0===h?0:h,v=t.trxRatio,p=void 0===v?1:v,g=t.tokenRatio,b=void 0===g?1:g,m=t.saleStart,y=void 0===m?Date.now():m,x=t.saleEnd,k=void 0!==x&&x,w=t.freeBandwidth,I=void 0===w?0:w,W=t.freeBandwidthLimit,A=void 0===W?0:W,S=t.frozenAmount,P=void 0===S?0:S,N=t.frozenDuration,E=void 0===N?0:N;return Ke.isString(s)&&s.length?Ke.isString(a)&&a.length?!Ke.isInteger(f)||f<=0?n("Invalid supply amount provided"):!Ke.isInteger(p)||p<=0?n("TRX ratio must be a positive integer"):!Ke.isInteger(b)||b<=0?n("Token ratio must be a positive integer"):!Ke.isInteger(y)||y<Date.now()?n("Invalid sale start timestamp provided"):!Ke.isInteger(k)||k<=y?n("Invalid sale end timestamp provided"):Ke.isString(d)&&d.length?Ke.isString(l)&&l.length&&Ke.isValidURL(l)?!Ke.isInteger(I)||I<0?n("Invalid free bandwidth amount provided"):!Ke.isInteger(A)||A<0||I&&!A?n("Invalid free bandwidth limit provided"):!Ke.isInteger(P)||P<0||!E&&P?n("Invalid frozen supply provided"):!Ke.isInteger(E)||E<0||E&&!P?n("Invalid frozen duration provided"):this.tronWeb.isAddress(r)?void this.tronWeb.fullNode.request("wallet/createassetissue",{owner_address:this.tronWeb.address.toHex(r),name:this.tronWeb.fromUtf8(s),abbr:this.tronWeb.fromUtf8(a),description:this.tronWeb.fromUtf8(d),url:this.tronWeb.fromUtf8(l),total_supply:parseInt(f),trx_num:parseInt(p),num:parseInt(b),start_time:parseInt(y),end_time:parseInt(k),free_asset_net_limit:parseInt(I),public_free_asset_net_limit:parseInt(A),frozen_supply:{frozen_amount:parseInt(P),frozen_days:parseInt(E)}},"post").then(function(t){return t.Error?n(t.Error):t.result&&t.result.message?n(e.tronWeb.toUtf8(t.result.message)):void n(null,t)}).catch(function(e){return n(e)}):n("Invalid issuer address provided"):n("Invalid token url provided"):n("Invalid token description provided"):n("Invalid token abbreviation provided"):n("Invalid token name provided")}},{key:"updateAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tronWeb.defaultAddress.hex,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ke.isFunction(t)&&(r=t,t=this.tronWeb.defaultAddress.hex),r?Ke.isString(e)&&e.length?this.tronWeb.isAddress(t)?void this.tronWeb.fullNode.request("wallet/updateaccount",{account_name:this.tronWeb.fromUtf8(e),owner_address:this.tronWeb.address.toHex(t)},"post").then(function(e){if(e.Error)return r(e.Error);r(null,e)}).catch(function(e){return r(e)}):r("Invalid origin address provided"):r("Name must be a string"):this.injectPromise(this.updateAccount,e,t)}},{key:"updateToken",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tronWeb.defaultAddress.hex,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ke.isFunction(r)&&(n=r,r=this.tronWeb.defaultAddress.hex),!n)return this.injectPromise(this.updateToken,t,r);var i=t.description,s=void 0!==i&&i,o=t.url,a=void 0!==o&&o,u=t.freeBandwidth,d=void 0===u?0:u,c=t.freeBandwidthLimit,l=void 0===c?0:c;return Ke.isString(s)&&s.length?Ke.isString(a)&&a.length&&Ke.isValidURL(a)?!Ke.isInteger(d)||d<0?n("Invalid free bandwidth amount provided"):!Ke.isInteger(l)||l<0||d&&!l?n("Invalid free bandwidth limit provided"):this.tronWeb.isAddress(r)?void this.tronWeb.fullNode.request("wallet/updateasset",{owner_address:this.tronWeb.address.toHex(r),description:this.tronWeb.fromUtf8(s),url:this.tronWeb.fromUtf8(a),new_limit:parseInt(d),new_public_limit:parseInt(l)},"post").then(function(t){return t.Error?n(t.Error):t.result&&t.result.message?n(e.tronWeb.toUtf8(t.result.message)):void n(null,t)}).catch(function(e){return n(e)}):n("Invalid issuer address provided"):n("Invalid token url provided"):n("Invalid token description provided")}},{key:"sendAsset",value:function(){return this.sendToken.apply(this,arguments)}},{key:"purchaseAsset",value:function(){return this.purchaseToken.apply(this,arguments)}},{key:"createAsset",value:function(){return this.createToken.apply(this,arguments)}},{key:"updateAsset",value:function(){return this.updateToken.apply(this,arguments)}},{key:"createProposal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tronWeb.defaultAddress.hex,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ke.isFunction(r)&&(n=r,r=this.tronWeb.defaultAddress.hex),!t)return n("Invalid proposal parameters provided");if(!n)return this.injectPromise(this.createProposal,t,r);if(!this.tronWeb.isAddress(r))return n("Invalid issuerAddress provided");if(!Ke.isArray(t))return n("Invalid parameters provided");var i=!0,s=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var d=a.value;if(!Ke.isObject(d))return n("Invalid parameters provided")}}catch(e){s=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}this.tronWeb.fullNode.request("wallet/proposalcreate",{owner_address:this.tronWeb.address.toHex(r),parameters:t},"post").then(function(t){return t.Error?n(t.Error):t.result&&t.result.message?n(e.tronWeb.toUtf8(t.result.message)):void n(null,t)}).catch(function(e){return n(e)})}},{key:"deleteProposal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tronWeb.defaultAddress.hex,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ke.isFunction(r)&&(n=r,r=this.tronWeb.defaultAddress.hex),n?this.tronWeb.isAddress(r)?!Ke.isInteger(t)||t<0?n("Invalid proposalID provided"):void this.tronWeb.fullNode.request("wallet/proposaldelete",{owner_address:this.tronWeb.address.toHex(r),proposal_id:parseInt(t)},"post").then(function(t){return t.Error?n(t.Error):t.result&&t.result.message?n(e.tronWeb.toUtf8(t.result.message)):void n(null,t)}).catch(function(e){return n(e)}):n("Invalid issuerAddress provided"):this.injectPromise(this.deleteProposal,t,r)}},{key:"voteProposal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.tronWeb.defaultAddress.hex,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ke.isFunction(n)&&(i=n,n=this.tronWeb.defaultAddress.hex),i?this.tronWeb.isAddress(n)?!Ke.isInteger(t)||t<0?i("Invalid proposalID provided"):Ke.isBoolean(r)?void this.tronWeb.fullNode.request("wallet/proposalapprove",{owner_address:this.tronWeb.address.toHex(n),proposal_id:parseInt(t),is_add_approval:isApproval.toString()},"post").then(function(t){return t.Error?i(t.Error):t.result&&t.result.message?i(e.tronWeb.toUtf8(t.result.message)):void i(null,t)}).catch(function(e){return i(e)}):i("Invalid hasApproval provided"):i("Invalid voterAddress address provided"):this.injectPromise(this.voteProposal,t,r,n)}},{key:"createTRXExchange",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.tronWeb.defaultAddress.hex,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ke.isFunction(n)&&(i=n,n=this.tronWeb.defaultAddress.hex),i?this.tronWeb.isAddress(n)?Ke.isString(e)&&e.length?!Ke.isInteger(t)||t<=0||!Ke.isInteger(r)||r<=0?i("Invalid amount provided"):void this.tronWeb.fullNode.request("wallet/exchangecreate",{owner_address:this.tronWeb.address.toHex(n),first_token_id:this.tronWeb.fromUtf8(e),first_token_balance:t,second_token_id:"5f",second_token_balance:r},"post").then(function(e){i(null,e)}).catch(function(e){return i(e)}):i("Invalid tokenName provided"):i("Invalid address provided"):this.injectPromise(this.createTRXExchange,e,t,r,n)}},{key:"createTokenExchange",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.tronWeb.defaultAddress.hex,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return Ke.isFunction(i)&&(s=i,i=this.tronWeb.defaultAddress.hex),s?this.tronWeb.isAddress(i)?Ke.isString(e)&&e.length?Ke.isString(r)&&r.length?!Ke.isInteger(t)||t<=0||!Ke.isInteger(n)||n<=0?s("Invalid amount provided"):void this.tronWeb.fullNode.request("wallet/exchangecreate",{owner_address:this.tronWeb.address.toHex(i),first_token_id:this.tronWeb.fromUtf8(e),first_token_balance:t,second_token_id:this.tronWeb.fromUtf8(r),second_token_balance:n},"post").then(function(e){s(null,e)}).catch(function(e){return s(e)}):s("Invalid secondTokenName provided"):s("Invalid firstTokenName provided"):s("Invalid address provided"):this.injectPromise(this.createTRXExchange,e,t,r,n,i)}},{key:"injectExchangeTokens",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.tronWeb.defaultAddress.hex,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ke.isFunction(i)&&(s=i,i=this.tronWeb.defaultAddress.hex),s?this.tronWeb.isAddress(i)?!Ke.isInteger(t)||t<0?s("Invalid exchangeID provided"):Ke.isString(r)&&r.length?!Ke.isInteger(n)||n<1?s("Invalid tokenAmount provided"):void this.tronWeb.fullNode.request("wallet/exchangeinject",{owner_address:this.tronWeb.address.toHex(i),exchange_id:parseInt(t),token_id:this.tronWeb.fromUtf8(r),quant:parseInt(n)},"post").then(function(t){return t.Error?s(t.Error):t.result&&t.result.message?s(e.tronWeb.toUtf8(t.result.message)):void s(null,t)}).catch(function(e){return s(e)}):s("Invalid tokenName provided"):s("Invalid ownerAddress provided"):this.injectPromise(this.injectExchangeTokens,t,r,n,i)}},{key:"withdrawExchangeTokens",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.tronWeb.defaultAddress.hex,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ke.isFunction(i)&&(s=i,i=this.tronWeb.defaultAddress.hex),s?this.tronWeb.isAddress(i)?!Ke.isInteger(t)||t<0?s("Invalid exchangeID provided"):Ke.isString(r)&&r.length?!Ke.isInteger(n)||n<1?s("Invalid tokenAmount provided"):void this.tronWeb.fullNode.request("wallet/exchangewithdraw",{owner_address:this.tronWeb.address.toHex(i),exchange_id:parseInt(t),token_id:this.tronWeb.fromUtf8(r),quant:parseInt(n)},"post").then(function(t){return t.Error?s(t.Error):t.result&&t.result.message?s(e.tronWeb.toUtf8(t.result.message)):void s(null,t)}).catch(function(e){return s(e)}):s("Invalid tokenName provided"):s("Invalid ownerAddress provided"):this.injectPromise(this.withdrawExchangeTokens,t,r,n,i)}},{key:"tradeExchangeTokens",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.tronWeb.defaultAddress.hex,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return Ke.isFunction(s)&&(o=s,s=this.tronWeb.defaultAddress.hex),o?this.tronWeb.isAddress(s)?!Ke.isInteger(t)||t<0?o("Invalid exchangeID provided"):Ke.isString(r)&&r.length?!Ke.isInteger(n)||n<1?o("Invalid tokenAmountSold provided"):!Ke.isInteger(i)||i<1?o("Invalid tokenAmountExpected provided"):void this.tronWeb.fullNode.request("wallet/exchangewithdraw",{owner_address:this.tronWeb.address.toHex(s),exchange_id:parseInt(t),token_id:this.tronWeb.fromAscii(r),quant:parseInt(n),expected:parseInt(i)},"post").then(function(t){return t.Error?o(t.Error):t.result&&t.result.message?o(e.tronWeb.toUtf8(t.result.message)):void o(null,t)}).catch(function(e){return o(e)}):o("Invalid tokenName provided"):o("Invalid ownerAddress provided"):this.injectPromise(this.tradeExchangeTokens,t,r,n,i,s)}}]),e}(),Me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(g()(this,e),!t||!t instanceof Qe)throw new Error("Expected instance of TronWeb");this.tronWeb=t,this.injectPromise=Ke.promiseInjector(this)}return m()(e,[{key:"parseToken",value:function(e){return B()({},e,{name:this.tronWeb.toUtf8(e.name),abbr:e.abbr&&this.tronWeb.toUtf8(e.abbr),description:e.description&&this.tronWeb.toUtf8(e.description),url:e.url&&this.tronWeb.toUtf8(e.url)})}},{key:"getCurrentBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.getCurrentBlock);this.tronWeb.fullNode.request("wallet/getnowblock").then(function(t){e(null,t)}).catch(function(t){return e(t)})}},{key:"getBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ke.isFunction(e)&&(t=e,e=this.tronWeb.defaultBlock),t?!1===e?t("No block identifier provided"):("earliest"==e&&(e=0),"latest"==e?this.getCurrentBlock(t):isNaN(e)&&Ke.isHex(e)?this.getBlockByHash(e,t):void this.getBlockByNumber(e,t)):this.injectPromise(this.getBlock,e)}},{key:"getBlockByHash",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return this.injectPromise(this.getBlockByHash,e);this.tronWeb.fullNode.request("wallet/getblockbyid",{value:e},"post").then(function(e){if(!Object.keys(e).length)return t("Block not found");t(null,e)}).catch(function(e){return t(e)})}},{key:"getBlockByNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?!Ke.isInteger(e)||e<0?t("Invalid block number provided"):void this.tronWeb.fullNode.request("wallet/getblockbynum",{num:parseInt(e)},"post").then(function(e){if(!Object.keys(e).length)return t("Block not found");t(null,e)}).catch(function(e){return t(e)}):this.injectPromise(this.getBlockByNumber,e)}},{key:"getBlockTransactionCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Ke.isFunction(e)&&(t=e,e=this.tronWeb.defaultBlock),!t)return this.injectPromise(this.getBlockTransactionCount,e);this.getBlock(e).then(function(e){var r=e.transactions;t(null,(void 0===r?[]:r).length)}).catch(function(e){return t(e)})}},{key:"getTransactionFromBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ke.isFunction(t)&&(r=t,t=0),Ke.isFunction(e)&&(r=e,e=this.tronWeb.defaultBlock),r?!Ke.isInteger(t)||t<0?r("Invalid transaction index provided"):void this.getBlock(e).then(function(e){var n=e.transactions,i=void 0!==n&&n;if(!i||i.length<t)return r("Transaction not found in block");r(null,i[t])}).catch(function(e){return r(e)}):this.injectPromise(this.getTransactionFromBlock,e,t)}},{key:"getTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return this.injectPromise(this.getTransaction,e);this.tronWeb.fullNode.request("wallet/gettransactionbyid",{value:e},"post").then(function(e){if(!Object.keys(e).length)return t("Transaction not found");t(null,e)}).catch(function(e){return t(e)})}},{key:"getConfirmedTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return this.injectPromise(this.getConfirmedTransaction,e);this.tronWeb.solidityNode.request("walletsolidity/gettransactionbyid",{value:e},"post").then(function(e){if(!Object.keys(e).length)return t("Transaction not found");t(null,e)}).catch(function(e){return t(e)})}},{key:"getTransactionInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return this.injectPromise(this.getTransactionInfo,e);this.tronWeb.solidityNode.request("walletsolidity/gettransactioninfobyid",{value:e},"post").then(function(e){t(null,e)}).catch(function(e){return t(e)})}},{key:"getTransactionsToAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ke.isFunction(r)&&(n=r,r=0),Ke.isFunction(t)&&(n=t,t=30),n?(e=this.tronWeb.address.toHex(e),this.getTransactionsRelated(e,"to",t,r,n)):this.injectPromise(this.getTransactionsToAddress,e,t,r)}},{key:"getTransactionsFromAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ke.isFunction(r)&&(n=r,r=0),Ke.isFunction(t)&&(n=t,t=30),n?(e=this.tronWeb.address.toHex(e),this.getTransactionsRelated(e,"from",t,r,n)):this.injectPromise(this.getTransactionsFromAddress,e,t,r)}},{key:"getTransactionsRelated",value:function(){var e=v()(h.a.mark(function e(){var t,r,n,i,s,o,a,u=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:this.tronWeb.defaultAddress.hex,r=u.length>1&&void 0!==u[1]?u[1]:"all",n=u.length>2&&void 0!==u[2]?u[2]:30,i=u.length>3&&void 0!==u[3]?u[3]:0,s=u.length>4&&void 0!==u[4]&&u[4],Ke.isFunction(i)&&(s=i,i=0),Ke.isFunction(n)&&(s=n,n=30),Ke.isFunction(r)&&(s=r,r="all"),Ke.isFunction(t)&&(s=t,t=this.tronWeb.defaultAddress.hex),s){e.next=11;break}return e.abrupt("return",this.injectPromise(this.getTransactionsRelated,t,r,n,i));case 11:if(["to","from","all"].includes(r)){e.next=13;break}return e.abrupt("return",s('Invalid direction provided: Expected "to", "from" or "all"'));case 13:if("all"!=r){e.next=27;break}return e.prev=14,e.next=17,this.getTransactionsRelated(t,"from",n,i);case 17:return o=e.sent,e.next=20,this.getTransactionsRelated(t,"to",n,i);case 20:return a=e.sent,e.abrupt("return",s(null,U()(o.map(function(e){return e.direction="from",e})).concat(U()(a.map(function(e){return e.direction="to",e}))).sort(function(e,t){return t.raw_data.timestamp-e.raw_data.timestamp})));case 24:return e.prev=24,e.t0=e.catch(14),e.abrupt("return",s(e.t0));case 27:if(this.tronWeb.isAddress(t)){e.next=29;break}return e.abrupt("return",s("Invalid address provided"));case 29:if(!(!Ke.isInteger(n)||n<0||i&&n<1)){e.next=31;break}return e.abrupt("return",s("Invalid limit provided"));case 31:if(Ke.isInteger(i)&&!(i<0)){e.next=33;break}return e.abrupt("return",s("Invalid offset provided"));case 33:t=this.tronWeb.address.toHex(t),this.tronWeb.solidityNode.request("walletextension/gettransactions".concat(r,"this"),{account:{address:t},offset:i,limit:n},"post").then(function(e){var t=e.transaction;s(null,t)}).catch(function(e){return s(e)});case 35:case"end":return e.stop()}},e,this,[[14,24]])}));return function(){return e.apply(this,arguments)}}()},{key:"getAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ke.isFunction(e)&&(t=e,e=this.tronWeb.defaultAddress.hex),t?this.tronWeb.isAddress(e)?(e=this.tronWeb.address.toHex(e),void this.tronWeb.solidityNode.request("walletsolidity/getaccount",{address:e},"post").then(function(e){t(null,e)}).catch(function(e){return t(e)})):t("Invalid address provided"):this.injectPromise(this.getAccount,e)}},{key:"getBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Ke.isFunction(e)&&(t=e,e=this.tronWeb.defaultAddress.hex),!t)return this.injectPromise(this.getBalance,e);this.getAccount(e).then(function(e){var r=e.balance;t(null,void 0===r?0:r)}).catch(function(e){return t(e)})}},{key:"getUnconfirmedAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ke.isFunction(e)&&(t=e,e=this.tronWeb.defaultAddress.hex),t?this.tronWeb.isAddress(e)?(e=this.tronWeb.address.toHex(e),void this.tronWeb.fullNode.request("wallet/getaccount",{address:e},"post").then(function(e){t(null,e)}).catch(function(e){return t(e)})):t("Invalid address provided"):this.injectPromise(this.getUnconfirmedAccount,e)}},{key:"getUnconfirmedBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Ke.isFunction(e)&&(t=e,e=this.tronWeb.defaultAddress.hex),!t)return this.injectPromise(this.getUnconfirmedBalance,e);this.getUnconfirmedAccount(e).then(function(e){var r=e.balance;t(null,void 0===r?0:r)}).catch(function(e){return t(e)})}},{key:"getBandwidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ke.isFunction(e)&&(t=e,e=this.tronWeb.defaultAddress.hex),t?this.tronWeb.isAddress(e)?(e=this.tronWeb.address.toHex(e),void this.tronWeb.fullNode.request("wallet/getaccountnet",{address:e},"post").then(function(e){var r=e.freeNetUsed,n=void 0===r?0:r,i=e.freeNetLimit,s=void 0===i?0:i,o=e.NetUsed,a=void 0===o?0:o,u=e.NetLimit;t(null,s-n+((void 0===u?0:u)-a))}).catch(function(e){return t(e)})):t("Invalid address provided"):this.injectPromise(this.getBandwidth,e)}},{key:"getTokensIssuedByAddress",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ke.isFunction(t)&&(r=t,t=this.tronWeb.defaultAddress.hex),r?this.tronWeb.isAddress(t)?(t=this.tronWeb.address.toHex(t),void this.tronWeb.fullNode.request("wallet/getassetissuebyaccount",{address:t},"post").then(function(t){var n=t.assetIssue,i=void 0!==n&&n;if(!i)return r(null,{});var s=i.map(function(t){return e.parseToken(t)}).reduce(function(e,t){return e[t.name]=t,e},{});r(null,s)}).catch(function(e){return r(e)})):r("Invalid address provided"):this.injectPromise(this.getTokensIssuedByAddress,t)}},{key:"getTokenFromID",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r?Ke.isString(t)&&t.length?void this.tronWeb.fullNode.request("wallet/getassetissuebyname",{value:this.tronWeb.fromUtf8(t)},"post").then(function(t){if(!t.name)return r("Token does not exist");r(null,e.parseToken(t))}).catch(function(e){return r(e)}):r("Invalid token ID provided"):this.injectPromise(this.getTokenFromID,t)}},{key:"listNodes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return this.injectPromise(this.listNodes);this.tronWeb.fullNode.request("wallet/listnodes").then(function(r){var n=r.nodes;t(null,(void 0===n?[]:n).map(function(t){var r=t.address,n=r.host,i=r.port;return"".concat(e.tronWeb.toUtf8(n),":").concat(i)}))}).catch(function(e){return t(e)})}},{key:"getBlockRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ke.isFunction(t)&&(r=t,t=30),Ke.isFunction(e)&&(r=e,e=0),r?!Ke.isInteger(e)||e<0?r("Invalid start of range provided"):!Ke.isInteger(t)||t<=e?r("Invalid end of range provided"):void this.tronWeb.fullNode.request("wallet/getblockbylimitnext",{startNum:parseInt(e),endNum:parseInt(t)+1},"post").then(function(e){var t=e.block;r(null,void 0===t?[]:t)}).catch(function(e){return r(e)}):this.injectPromise(this.getBlockRange,e,t)}},{key:"listSuperRepresentatives",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.listSuperRepresentatives);this.tronWeb.fullNode.request("wallet/listwitnesses").then(function(t){var r=t.witnesses;e(null,void 0===r?[]:r)}).catch(function(t){return e(t)})}},{key:"listTokens",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ke.isFunction(r)&&(n=r,r=0),Ke.isFunction(t)&&(n=t,t=0),n?!Ke.isInteger(t)||t<0||r&&t<1?n("Invalid limit provided"):!Ke.isInteger(r)||r<0?n("Invalid offset provided"):t?void this.tronWeb.fullNode.request("wallet/getpaginatedassetissuelist",{offset:parseInt(r),limit:parseInt(t)},"post").then(function(t){var r=t.assetIssue;n(null,(void 0===r?[]:r).map(function(t){return e.parseToken(t)}))}).catch(function(e){return n(e)}):this.tronWeb.fullNode.request("wallet/getassetissuelist").then(function(t){var r=t.assetIssue;n(null,(void 0===r?[]:r).map(function(t){return e.parseToken(t)}))}).catch(function(e){return n(e)}):this.injectPromise(this.listTokens,t,r)}},{key:"timeUntilNextVoteCycle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.timeUntilNextVoteCycle);this.tronWeb.fullNode.request("wallet/getnextmaintenancetime").then(function(t){var r=t.num,n=void 0===r?-1:r;if(-1==n)return e("Failed to get time until next vote cycle");e(null,Math.floor(n/1e3))}).catch(function(t){return e(t)})}},{key:"getContract",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.tronWeb.isAddress(e)?(e=this.tronWeb.address.toHex(e),void this.tronWeb.fullNode.request("wallet/getcontract",{value:e}).then(function(e){if(e.Error)return t("Contract does not exist");t(null,e)}).catch(function(e){return t(e)})):t("Invalid contract address provided"):this.injectPromise(this.getContract,e)}},{key:"verifyMessage",value:function(){var e=v()(h.a.mark(function e(){var t,r,n,i,s,o,a,u,d,c=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],r=c.length>1&&void 0!==c[1]&&c[1],n=c.length>2&&void 0!==c[2]?c[2]:this.tronWeb.defaultAddress.base58,i=!(c.length>3&&void 0!==c[3])||c[3],s=c.length>4&&void 0!==c[4]&&c[4],Ke.isFunction(n)&&(s=n,n=this.tronWeb.defaultAddress.base58,i=!0),Ke.isFunction(i)&&(s=i,i=!0),s){e.next=9;break}return e.abrupt("return",this.injectPromise(this.verifyMessage,t,r,n,i));case 9:if(Ke.isHex(t)){e.next=11;break}return e.abrupt("return",s("Expected hex message input"));case 11:if("0x"==t.substr(0,2)&&(t=t.substring(2)),"0x"==r.substr(0,2)&&(r=r.substr(2)),o=U()(Te.utils.toUtf8Bytes(i?"TRON Signed Message:\n32":"Ethereum Signed Message:\n32")).concat(U()(Ke.code.hexStr2byteArray(t))),a=Te.utils.keccak256(o),u=Te.utils.recoverAddress(a,{recoveryParam:"1c"==r.substring(128,130)?1:0,r:"0x"+r.substring(0,64),s:"0x"+r.substring(64,128)}),d="41"+u.substr(2),this.tronWeb.address.fromHex(d)!=this.tronWeb.address.fromHex(n)){e.next=20;break}return e.abrupt("return",s(null,!0));case 20:s("Signature does not match");case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(){var e=v()(h.a.mark(function e(){var t,r,n,i,s,o,a,u,d,c=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],r=c.length>1&&void 0!==c[1]?c[1]:this.tronWeb.defaultPrivateKey,n=!(c.length>2&&void 0!==c[2])||c[2],i=c.length>3&&void 0!==c[3]&&c[3],Ke.isFunction(r)&&(i=r,r=this.tronWeb.defaultPrivateKey,n=!0),Ke.isFunction(n)&&(i=n,n=!0),i){e.next=8;break}return e.abrupt("return",this.injectPromise(this.sign,t,r,n));case 8:if(!Ke.isString(t)){e.next=24;break}if("0x"==t.substring(0,2)&&(t=t.substring(2)),Ke.isHex(t)){e.next=12;break}return e.abrupt("return",i("Expected hex message input"));case 12:return e.prev=12,s=new Te.utils.SigningKey(r),o=U()(Te.utils.toUtf8Bytes(n?"TRON Signed Message:\n32":"Ethereum Signed Message:\n32")).concat(U()(Ke.code.hexStr2byteArray(t))),a=Te.utils.keccak256(o),u=s.signDigest(a),d=["0x",u.r.substring(2),u.s.substring(2),Number(u.v).toString(16)].join(""),e.abrupt("return",i(null,d));case 21:e.prev=21,e.t0=e.catch(12),i(e.t0);case 24:if(Ke.isObject(t)){e.next=26;break}return e.abrupt("return",i("Invalid transaction provided"));case 26:if(!t.signature){e.next=28;break}return e.abrupt("return",i("Transaction is already signed"));case 28:if(e.prev=28,this.tronWeb.address.toHex(this.tronWeb.address.fromPrivateKey(r)).toLowerCase()===t.raw_data.contract[0].parameter.value.owner_address.toLowerCase()){e.next=32;break}return e.abrupt("return",i("Private key does not match address in transaction"));case 32:return e.abrupt("return",i(null,Ke.crypto.signTransaction(r,t)));case 35:e.prev=35,e.t1=e.catch(28),i(e.t1);case 38:case"end":return e.stop()}},e,this,[[12,21],[28,35]])}));return function(){return e.apply(this,arguments)}}()},{key:"sendRawTransaction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Ke.isObject(e)?e.signature&&Ke.isArray(e.signature)?void this.tronWeb.fullNode.request("wallet/broadcasttransaction",e,"post").then(function(e){t(null,e)}).catch(function(e){return t(e)}):t("Transaction is not signed"):t("Invalid transaction provided"):this.injectPromise(this.sendRawTransaction,e)}},{key:"sendTransaction",value:function(){var e=v()(h.a.mark(function e(){var t,r,n,i,s,o,a,u,d=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]&&d[0],r=d.length>1&&void 0!==d[1]&&d[1],n=d.length>2&&void 0!==d[2]?d[2]:{},i=d.length>3&&void 0!==d[3]&&d[3],Ke.isFunction(n)&&(i=n,n={}),"string"==typeof n&&(n={privateKey:n}),i){e.next=8;break}return e.abrupt("return",this.injectPromise(this.sendTransaction,t,r,n));case 8:if(this.tronWeb.isAddress(t)){e.next=10;break}return e.abrupt("return",i("Invalid recipient provided"));case 10:if(Ke.isInteger(r)&&!(r<=0)){e.next=12;break}return e.abrupt("return",i("Invalid amount provided"));case 12:if((n=B()({privateKey:this.tronWeb.defaultPrivateKey,address:this.tronWeb.defaultAddress.hex},n)).privateKey||n.address){e.next=15;break}return e.abrupt("return",i("Function requires either a private key or address to be set"));case 15:return e.prev=15,s=n.privateKey?this.tronWeb.address.fromPrivateKey(n.privateKey):n.address,e.next=19,this.tronWeb.transactionBuilder.sendTrx(t,r,s);case 19:return o=e.sent,e.next=22,this.sign(o,n.privateKey||void 0);case 22:return a=e.sent,e.next=25,this.sendRawTransaction(a);case 25:return u=e.sent,e.abrupt("return",i(null,u));case 29:return e.prev=29,e.t0=e.catch(15),e.abrupt("return",i(e.t0));case 32:case"end":return e.stop()}},e,this,[[15,29]])}));return function(){return e.apply(this,arguments)}}()},{key:"sendToken",value:function(){var e=v()(h.a.mark(function e(){var t,r,n,i,s,o,a,u,d,c=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],r=c.length>1&&void 0!==c[1]&&c[1],n=c.length>2&&void 0!==c[2]&&c[2],i=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]&&c[4],Ke.isFunction(i)&&(s=i,i={}),"string"==typeof i&&(i={privateKey:i}),s){e.next=9;break}return e.abrupt("return",this.injectPromise(this.sendToken,t,r,n,i));case 9:if(this.tronWeb.isAddress(t)){e.next=11;break}return e.abrupt("return",s("Invalid recipient provided"));case 11:if(Ke.isInteger(r)&&!(r<=0)){e.next=13;break}return e.abrupt("return",s("Invalid amount provided"));case 13:if(Ke.isString(n)){e.next=15;break}return e.abrupt("return",s("Invalid token ID provided"));case 15:if((i=B()({privateKey:this.tronWeb.defaultPrivateKey,address:this.tronWeb.defaultAddress.hex},i)).privateKey||i.address){e.next=18;break}return e.abrupt("return",s("Function requires either a private key or address to be set"));case 18:return e.prev=18,o=i.privateKey?this.tronWeb.address.fromPrivateKey(i.privateKey):i.address,e.next=22,this.tronWeb.transactionBuilder.sendToken(t,r,n,o);case 22:return a=e.sent,e.next=25,this.sign(a,i.privateKey||void 0);case 25:return u=e.sent,e.next=28,this.sendRawTransaction(u);case 28:return d=e.sent,e.abrupt("return",s(null,d));case 32:return e.prev=32,e.t0=e.catch(18),e.abrupt("return",s(e.t0));case 35:case"end":return e.stop()}},e,this,[[18,32]])}));return function(){return e.apply(this,arguments)}}()},{key:"freezeBalance",value:function(){var e=v()(h.a.mark(function e(){var t,r,n,i,s,o,a,u,d,c=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:0,r=c.length>1&&void 0!==c[1]?c[1]:3,n=c.length>2&&void 0!==c[2]?c[2]:"BANDWIDTH",i=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]&&c[4],Ke.isFunction(r)&&(s=r,r=3),Ke.isFunction(n)&&(s=n,n="BANDWIDTH"),Ke.isFunction(i)&&(s=i,i={}),"string"==typeof i&&(i={privateKey:i}),s){e.next=11;break}return e.abrupt("return",this.injectPromise(this.freezeBalance,t,r,n,i));case 11:if(["BANDWIDTH","ENERGY"].includes(n)){e.next=13;break}return e.abrupt("return",s('Invalid resource provided: Expected "BANDWIDTH" or "ENERGY"'));case 13:if(Ke.isInteger(t)&&!(t<=0)){e.next=15;break}return e.abrupt("return",s("Invalid amount provided"));case 15:if(Ke.isInteger(r)&&!(r<3)){e.next=17;break}return e.abrupt("return",s("Invalid duration provided, minimum of 3 days"));case 17:if((i=B()({privateKey:this.tronWeb.defaultPrivateKey,address:this.tronWeb.defaultAddress.hex},i)).privateKey||i.address){e.next=20;break}return e.abrupt("return",s("Function requires either a private key or address to be set"));case 20:return e.prev=20,o=i.privateKey?this.tronWeb.address.fromPrivateKey(i.privateKey):i.address,e.next=24,this.tronWeb.transactionBuilder.freezeBalance(t,r,n,o);case 24:return a=e.sent,e.next=27,this.sign(a,i.privateKey||void 0);case 27:return u=e.sent,e.next=30,this.sendRawTransaction(u);case 30:return d=e.sent,e.abrupt("return",s(null,d));case 34:return e.prev=34,e.t0=e.catch(20),e.abrupt("return",s(e.t0));case 37:case"end":return e.stop()}},e,this,[[20,34]])}));return function(){return e.apply(this,arguments)}}()},{key:"unfreezeBalance",value:function(){var e=v()(h.a.mark(function e(){var t,r,n,i,s,o,a,u=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:"BANDWIDTH",r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]&&u[2],Ke.isFunction(t)&&(n=t,t="BANDWIDTH"),Ke.isFunction(r)&&(n=r,r={}),"string"==typeof r&&(r={privateKey:r}),n){e.next=8;break}return e.abrupt("return",this.injectPromise(this.unfreezeBalance,t,r));case 8:if(["BANDWIDTH","ENERGY"].includes(t)){e.next=10;break}return e.abrupt("return",n('Invalid resource provided: Expected "BANDWIDTH" or "ENERGY"'));case 10:if((r=B()({privateKey:this.tronWeb.defaultPrivateKey,address:this.tronWeb.defaultAddress.hex},r)).privateKey||r.address){e.next=13;break}return e.abrupt("return",n("Function requires either a private key or address to be set"));case 13:return e.prev=13,i=r.privateKey?this.tronWeb.address.fromPrivateKey(r.privateKey):r.address,e.next=17,this.tronWeb.transactionBuilder.unfreezeBalance(t,i);case 17:return s=e.sent,e.next=20,this.sign(s,r.privateKey||void 0);case 20:return o=e.sent,e.next=23,this.sendRawTransaction(o);case 23:return a=e.sent,e.abrupt("return",n(null,a));case 27:return e.prev=27,e.t0=e.catch(13),e.abrupt("return",n(e.t0));case 30:case"end":return e.stop()}},e,this,[[13,27]])}));return function(){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var e=v()(h.a.mark(function e(){var t,r,n,i,s,o,a,u=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]&&u[2],Ke.isFunction(r)&&(n=r,r={}),"string"==typeof r&&(r={privateKey:r}),n){e.next=7;break}return e.abrupt("return",this.injectPromise(this.updateAccount,t,r));case 7:if(Ke.isString(t)&&t.length){e.next=9;break}return e.abrupt("return",n("Name must be a string"));case 9:if((r=B()({privateKey:this.tronWeb.defaultPrivateKey,address:this.tronWeb.defaultAddress.hex},r)).privateKey||r.address){e.next=12;break}return e.abrupt("return",n("Function requires either a private key or address to be set"));case 12:return e.prev=12,i=r.privateKey?this.tronWeb.address.fromPrivateKey(r.privateKey):r.address,e.next=16,this.tronWeb.transactionBuilder.updateAccount(t,i);case 16:return s=e.sent,e.next=19,this.sign(s,r.privateKey||void 0);case 19:return o=e.sent,e.next=22,this.sendRawTransaction(o);case 22:return a=e.sent,e.abrupt("return",n(null,a));case 26:return e.prev=26,e.t0=e.catch(12),e.abrupt("return",n(e.t0));case 29:case"end":return e.stop()}},e,this,[[12,26]])}));return function(){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){return this.sign.apply(this,arguments)}},{key:"sendAsset",value:function(){return this.sendToken.apply(this,arguments)}},{key:"send",value:function(){return this.sendTransaction.apply(this,arguments)}},{key:"sendTrx",value:function(){return this.sendTransaction.apply(this,arguments)}},{key:"broadcast",value:function(){return this.sendRawTransaction.apply(this,arguments)}},{key:"signTransaction",value:function(){return this.sign.apply(this,arguments)}},{key:"getProposal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?!Ke.isInteger(e)||e<0?t("Invalid proposalID provided"):void this.tronWeb.fullNode.request("wallet/getproposalbyid",{id:parseInt(e)},"post").then(function(e){t(null,e)}).catch(function(e){return t(e)}):this.injectPromise(this.getProposal,e)}},{key:"listProposals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.listProposals);this.tronWeb.fullNode.request("wallet/listproposals",{},"post").then(function(t){var r=t.proposals;e(null,void 0===r?[]:r)}).catch(function(t){return e(t)})}},{key:"getChainParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.getChainParameters);this.tronWeb.fullNode.request("wallet/getchainparameters",{},"post").then(function(t){var r=t.chainParameter;e(null,void 0===r?[]:r)}).catch(function(t){return e(t)})}},{key:"getAccountResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tronWeb.defaultAddress.hex,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.tronWeb.isAddress(e)?void this.tronWeb.fullNode.request("wallet/getaccountresource",{address:this.tronWeb.address.toHex(e)},"post").then(function(e){t(null,e)}).catch(function(e){return t(e)}):t("Invalid address provided"):this.injectPromise(this.getAccountResources,e)}},{key:"getExchangeByID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?!Ke.isInteger(e)||e<0?t("Invalid exchangeID provided"):void this.tronWeb.fullNode.request("wallet/getexchangebyid",{id:e},"post").then(function(e){t(null,e)}).catch(function(e){return t(e)}):this.injectPromise(this.getExchangeByID,e)}},{key:"listExchanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return this.injectPromise(this.listExchanges);this.tronWeb.fullNode.request("wallet/listexchanges",{},"post").then(function(t){var r=t.exchanges;e(null,void 0===r?[]:r)},"post").catch(function(t){return e(t)})}},{key:"listExchangesPaginated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ke.isFunction(t)&&(r=t,t=0),Ke.isFunction(e)&&(r=e,e=30),!r)return this.injectPromise(this.listExchanges);this.tronWeb.fullNode.request("wallet/listexchangespaginated",{limit:e,offset:t},"post").then(function(e){var t=e.exchanges;r(null,void 0===t?[]:t)}).catch(function(e){return r(e)})}}]),e}(),Je=function(e){return e.name+"("+Ge(e.inputs||[]).join(",")+")"},Ge=function(e){return e.map(function(e){return e.type})},Ye=function(e,t){var r=e.map(function(e){return e.name}).filter(function(e){return!!e}),n=e.map(function(e){return e.type});return Ke.abi.decodeParams(r,n,t)},Xe=function(){function e(t,r){g()(this,e),this.tronWeb=t.tronWeb,this.contract=t,this.abi=r,this.name=r.name||(r.name=r.type),this.inputs=r.inputs||[],this.outputs=r.outputs||[],this.functionSelector=Je(r),this.signature=this.tronWeb.sha3(this.functionSelector,!1).slice(0,8),this.injectPromise=Ke.promiseInjector(this),this.defaultOptions={feeLimit:1e9,callValue:0,from:this.tronWeb.defaultAddress.hex,shouldPollResponse:!1}}return m()(e,[{key:"decodeInput",value:function(e){return Ye(this.inputs,"0x"+e)}},{key:"onMethod",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=Ge(this.inputs);return r.forEach(function(t,n){"address"==i[n]&&(r[n]=e.tronWeb.address.toHex(t).replace(/^(41)/,"0x")),"address[]"==i[n]&&(r[n]=r[n].map(function(t){return e.tronWeb.address.toHex(t).replace(/^(41)/,"0x")}))}),{call:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._call.apply(e,[i,r].concat(n))},send:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e._send.apply(e,[i,r].concat(n))},watch:function(){return e._watch.apply(e,arguments)}}}},{key:"_call",value:function(){var e=v()(h.a.mark(function e(t,r){var n,i,s,o,a=this,u=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>2&&void 0!==u[2]?u[2]:{},i=u.length>3&&void 0!==u[3]&&u[3],Ke.isFunction(n)&&(i=n,n={}),i){e.next=5;break}return e.abrupt("return",this.injectPromise(this._call,t,r,n));case 5:if(t.length===r.length){e.next=7;break}return e.abrupt("return",i("Invalid argument count provided"));case 7:if(this.contract.address){e.next=9;break}return e.abrupt("return",i("Smart contract is missing address"));case 9:if(this.contract.deployed){e.next=11;break}return e.abrupt("return",i("Calling smart contracts requires you to load the contract first"));case 11:if(s=this.abi.stateMutability,["pure","view"].includes(s.toLowerCase())){e.next=14;break}return e.abrupt("return",i('Methods with state mutability "'.concat(s,'" must use send()')));case 14:n=B()({},this.defaultOptions,n),o=r.map(function(e,r){return{type:t[r],value:e}}),this.tronWeb.transactionBuilder.triggerSmartContract(this.contract.address,this.functionSelector,n.feeLimit,n.callValue,o,this.tronWeb.address.toHex(n.from),function(e,t){if(e)return i(e);if(!Ke.hasProperty(t,"constant_result"))return i("Failed to execute");try{var r=Ye(a.outputs,"0x"+t.constant_result[0]);return 1===r.length&&(r=r[0]),i(null,r)}catch(e){return i(e)}});case 17:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"_send",value:function(){var e=v()(h.a.mark(function e(t,r){var n,i,s,o,a,u,d,c,l,f,p=this,g=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.length>2&&void 0!==g[2]?g[2]:{},i=g.length>3&&void 0!==g[3]?g[3]:this.tronWeb.defaultPrivateKey,s=g.length>4&&void 0!==g[4]&&g[4],Ke.isFunction(i)&&(s=i,i=this.tronWeb.defaultPrivateKey),Ke.isFunction(n)&&(s=n,n={}),s){e.next=7;break}return e.abrupt("return",this.injectPromise(this._send,t,r,n,i));case 7:if(t.length===r.length){e.next=9;break}throw new Error("Invalid argument count provided");case 9:if(this.contract.address){e.next=11;break}return e.abrupt("return",s("Smart contract is missing address"));case 11:if(this.contract.deployed){e.next=13;break}return e.abrupt("return",s("Calling smart contracts requires you to load the contract first"));case 13:if(o=this.abi.stateMutability,!["pure","view"].includes(o.toLowerCase())){e.next=16;break}return e.abrupt("return",s('Methods with state mutability "'.concat(o,'" must use call()')));case 16:return["payable"].includes(o.toLowerCase())||(n.callValue=0),n=B()({},this.defaultOptions,n),a=r.map(function(e,r){return{type:t[r],value:e}}),e.prev=19,u=i?this.tronWeb.address.fromPrivateKey(i):this.tronWeb.defaultAddress.base58,e.next=23,this.tronWeb.transactionBuilder.triggerSmartContract(this.contract.address,this.functionSelector,n.feeLimit,n.callValue,a,this.tronWeb.address.toHex(u));case 23:if((d=e.sent).result&&d.result.result){e.next=26;break}return e.abrupt("return",s("Unknown error: "+JSON.stringify(d,null,2)));case 26:return e.next=28,this.tronWeb.trx.sign(d.transaction,i);case 28:if((c=e.sent).signature){e.next=33;break}if(i){e.next=32;break}return e.abrupt("return",s("Transaction was not signed properly"));case 32:return e.abrupt("return",s("Invalid private key provided"));case 33:return e.next=35,this.tronWeb.trx.sendRawTransaction(c);case 35:if((l=e.sent).result){e.next=38;break}return e.abrupt("return",s("Unknown error: "+JSON.stringify(l,null,2)));case 38:if(n.shouldPollResponse){e.next=40;break}return e.abrupt("return",s(null,c.txID));case 40:(f=function(){var e=v()(h.a.mark(function e(){var t,r,n,i=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(20!=(t=i.length>0&&void 0!==i[0]?i[0]:0)){e.next=3;break}return e.abrupt("return",s({error:"Cannot find result in solidity node",transaction:c}));case 3:return e.next=5,p.tronWeb.trx.getTransactionInfo(c.txID);case 5:if(r=e.sent,Object.keys(r).length){e.next=8;break}return e.abrupt("return",setTimeout(function(){f(t+1)},3e3));case 8:if(!r.result||"FAILED"!=r.result){e.next=10;break}return e.abrupt("return",s({error:p.tronWeb.toUtf8(r.resMessage),transaction:c,output:r}));case 10:if(Ke.hasProperty(r,"contractResult")){e.next=12;break}return e.abrupt("return",s({error:"Failed to execute: "+JSON.stringify(r,null,2),transaction:c,output:r}));case 12:return 1===(n=Ye(p.outputs,"0x"+r.contractResult[0])).length&&(n=n[0]),e.abrupt("return",s(null,n));case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}())(),e.next=47;break;case 44:return e.prev=44,e.t0=e.catch(19),e.abrupt("return",s(e.t0));case 47:case"end":return e.stop()}},e,this,[[19,44]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"_watch",value:function(){var e=v()(h.a.mark(function e(){var t,r,n,i,s,o,a,u=this,d=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:{},r=d.length>1&&void 0!==d[1]&&d[1],Ke.isFunction(t)&&(r=t,t={}),Ke.isFunction(r)){e.next=5;break}throw new Error("Expected callback to be provided");case 5:if(this.contract.address){e.next=7;break}return e.abrupt("return",r("Smart contract is missing address"));case 7:if("event"===this.abi.type.toLowerCase()){e.next=9;break}return e.abrupt("return",r("Invalid method type for event watching"));case 9:if(this.tronWeb.eventServer){e.next=11;break}return e.abrupt("return",r("No event server configured"));case 11:return n=!1,i=!1,s=(new Date).getTime(),o=function(){var e=v()(h.a.mark(function e(){var r,n,o,a,d;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.tronWeb.getEventResult(u.contract.address,s,u.name);case 3:return r=e.sent,n=r.sort(function(e,t){return t.block-e.block}),o=ze()(n,1),a=o[0],d=r.filter(function(e,n){return!(t.resourceNode&&!RegExp(t.resourceNode,"i").test(e.resourceNode))&&(!r.slice(0,n).some(function(t){return JSON.stringify(t)==JSON.stringify(e)})&&(!i||e.block>i))}),a&&(i=a.block),e.abrupt("return",d);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),a=function(){n&&clearInterval(n),n=setInterval(function(){o().then(function(e){return e.forEach(function(e){r(null,Ke.parseEvent(e,u.abi))})}).catch(function(e){return r(e)})},3e3)},e.next=18,o();case 18:return a(),e.abrupt("return",{start:a(),stop:function(){n&&(clearInterval(n),n=!1)}});case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),Ze=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(g()(this,e),!t||!t instanceof Qe)throw new Error("Expected instance of TronWeb");this.tronWeb=t,this.injectPromise=Ke.promiseInjector(this),this.address=n,this.abi=r,this.eventListener=!1,this.bytecode=!1,this.deployed=!1,this.lastBlock=!1,this.methods={},this.methodInstances={},this.props=[],this.tronWeb.isAddress(n)?this.deployed=!0:this.address=!1,this.loadAbi(r)}return m()(e,[{key:"_getEvents",value:function(){var e=v()(h.a.mark(function e(){var t,r,n,i,s,o,a=this,u=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.tronWeb.getEventResult(this.address);case 3:return r=e.sent,n=r.sort(function(e,t){return t.block-e.block}),i=ze()(n,1),s=i[0],o=r.filter(function(e,n){return!(t.resourceNode&&!RegExp(t.resourceNode,"i").test(e.resourceNode))&&(!r.slice(0,n).some(function(t){return JSON.stringify(t)==JSON.stringify(e)})&&(!a.lastBlock||e.block>a.lastBlock))}),s&&(this.lastBlock=s.block),e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_startEventListener",value:function(){var e=v()(h.a.mark(function e(){var t,r,n=this,i=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},r=i.length>1?i[1]:void 0,Ke.isFunction(t)&&(r=t,t={}),this.eventListener&&clearInterval(this.eventListener),this.tronWeb.eventServer){e.next=6;break}throw new Error("Event server is not configured");case 6:if(this.address){e.next=8;break}throw new Error("Contract is not configured with an address");case 8:return this.eventCallback=r,e.next=11,this._getEvents(t);case 11:this.eventListener=setInterval(function(){n._getEvents(t).then(function(e){return e.forEach(function(e){n.eventCallback&&n.eventCallback(e)})}).catch(function(e){console.error("Failed to get event list",e)})},3e3);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_stopEventListener",value:function(){this.eventListener&&(clearInterval(this.eventListener),this.eventListener=!1,this.eventCallback=!1)}},{key:"hasProperty",value:function(e){return this.hasOwnProperty(e)||this.__proto__.hasOwnProperty(e)}},{key:"loadAbi",value:function(e){var t=this;this.abi=e,this.methods={},this.props.forEach(function(e){return delete t[e]}),e.forEach(function(e){if("constructor"!==e.type.toLowerCase()){var r=new Xe(t,e),n=r.onMethod.bind(r),i=r.name,s=r.functionSelector,o=r.signature;t.methods[i]=n,t.methods[s]=n,t.methods[o]=n,t.methodInstances[i]=r,t.methodInstances[s]=r,t.methodInstances[o]=r,t.hasProperty(i)||(t[i]=n,t.props.push(i)),t.hasProperty(s)||(t[s]=n,t.props.push(s)),t.hasProperty(o)||(t[o]=n,t.props.push(o))}})}},{key:"decodeInput",value:function(e){var t=e.substring(0,8),r=e.substring(8);if(!this.methodInstances[t])throw new Error("Contract method "+t+" not found");return{name:this.methodInstances[t].name,params:this.methodInstances[t].decodeInput(r)}}},{key:"new",value:function(){var e=v()(h.a.mark(function e(t){var r,n,i,s,o,a,u=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:this.tronWeb.defaultPrivateKey,n=u.length>2&&void 0!==u[2]&&u[2],Ke.isFunction(r)&&(n=r,r=this.tronWeb.defaultPrivateKey),n){e.next=5;break}return e.abrupt("return",this.injectPromise(this.new,t,r));case 5:return e.prev=5,i=this.tronWeb.address.fromPrivateKey(r),e.next=9,this.tronWeb.transactionBuilder.createSmartContract(t,i);case 9:return s=e.sent,e.next=12,this.tronWeb.trx.sign(s,r);case 12:return o=e.sent,e.next=15,this.tronWeb.trx.sendRawTransaction(o);case 15:if((a=e.sent).result){e.next=18;break}return e.abrupt("return",n("Unknown error: "+JSON.stringify(a,null,2)));case 18:return e.abrupt("return",this.at(o.contract_address,n));case 21:return e.prev=21,e.t0=e.catch(5),e.abrupt("return",n(e.t0));case 24:case"end":return e.stop()}},e,this,[[5,21]])}));return function(t){return e.apply(this,arguments)}}()},{key:"at",value:function(){var e=v()(h.a.mark(function e(t){var r,n,i=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]&&i[1]){e.next=3;break}return e.abrupt("return",this.injectPromise(this.at,t));case 3:return e.prev=3,e.next=6,this.tronWeb.trx.getContract(t);case 6:(n=e.sent).contract_address||r("Unknown error: "+JSON.stringify(n,null,2)),this.address=n.contract_address,this.bytecode=n.bytecode,this.deployed=!0,this.loadAbi(n.abi.entrys),r(null,this),e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(3),!e.t0.toString().includes("does not exist")){e.next=19;break}return e.abrupt("return",r("Contract has not been deployed on the network"));case 19:return e.abrupt("return",r(e.t0));case 20:case"end":return e.stop()}},e,this,[[3,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"events",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Ke.isFunction(e)&&(t=e,e={}),!Ke.isFunction(t))throw new Error("Callback function expected");var r=this;return{start:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return n?(r._startEventListener(e,t).then(function(){n()}).catch(function(e){n(e)}),this):(r._startEventListener(e,t),this)},stop:function(){r._stopEventListener()}}}}]),e}();r.d(t,"default",function(){return Qe});var Qe=function(e){function t(e,r){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return g()(this,t),n=x()(this,w()(t).call(this)),Ke.isString(e)&&(e=new Re.HttpProvider(e)),Ke.isString(r)&&(r=new Re.HttpProvider(r)),Ke.isString(i)&&(i=new Re.HttpProvider(i)),n.setFullNode(e),n.setSolidityNode(r),n.setEventServer(i),n.providers=Re,n.BigNumber=qe.a,n.defaultBlock=!1,n.defaultPrivateKey=!1,n.defaultAddress={hex:!1,base58:!1},["sha3","toHex","toUtf8","fromUtf8","toAscii","fromAscii","toDecimal","fromDecimal","toSun","fromSun","toBigNumber","isAddress","createAccount","address"].forEach(function(e){n[e]=t[e]}),s&&n.setPrivateKey(s),n.transactionBuilder=new Ve(S()(S()(n))),n.trx=new Me(S()(S()(n))),n.utils=Ke,n.injectPromise=Ke.promiseInjector(S()(S()(n))),n}return W()(t,e),m()(t,[{key:"setDefaultBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if([!1,"latest","earliest",0].includes(e))return this.defaultBlock=e;if(!Ke.isInteger(e)||!e)throw new Error("Invalid block ID provided");this.defaultBlock=Math.abs(e)}},{key:"setPrivateKey",value:function(e){try{this.setAddress(this.address.fromPrivateKey(e))}catch(e){throw new Error("Invalid private key provided")}this.defaultPrivateKey=e,this.emit("privateKeyChanged",e)}},{key:"setAddress",value:function(e){if(!this.isAddress(e))throw new Error("Invalid address provided");var t=this.address.toHex(e),r=this.address.fromHex(e);this.defaultPrivateKey&&this.address.fromPrivateKey(this.defaultPrivateKey)!==r&&(this.defaultPrivateKey=!1),this.defaultAddress={hex:t,base58:r},this.emit("addressChanged",{hex:t,base58:r})}},{key:"isValidProvider",value:function(e){return Object.values(Re).some(function(t){return e instanceof t})}},{key:"setFullNode",value:function(e){if(Ke.isString(e)&&(e=new Re.HttpProvider(e)),!this.isValidProvider(e))throw new Error("Invalid full node provided");this.fullNode=e,this.fullNode.setStatusPage("wallet/getnowblock")}},{key:"setSolidityNode",value:function(e){if(Ke.isString(e)&&(e=new Re.HttpProvider(e)),!this.isValidProvider(e))throw new Error("Invalid solidity node provided");this.solidityNode=e,this.solidityNode.setStatusPage("walletsolidity/getnowblock")}},{key:"setEventServer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return this.eventServer=!1;if(Ke.isString(t)&&(t=new Re.HttpProvider(t)),!this.isValidProvider(t))throw new Error("Invalid event server provided");this.eventServer=t,this.eventServer.isConnected=function(){return e.eventServer.request("healthcheck").then(function(){return!0}).catch(function(){return e.eventServer.request("events?size=1").then(function(e){return Array.isArray(e)})}).catch(function(){return!1})}}},{key:"currentProviders",value:function(){return{fullNode:this.fullNode,solidityNode:this.solidityNode,eventServer:this.eventServer}}},{key:"currentProvider",value:function(){return this.currentProviders()}},{key:"getEventResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!i)return this.injectPromise(this.getEventResult,e,t,r,n);this.eventServer||i("No event server configured");var s=[];return this.isAddress(e)?r&&!e?i("Usage of event name filtering requires a contract address"):n&&!r?i("Usage of block number filtering requires an event name"):(e&&s.push(this.address.fromHex(e)),r&&s.push(r),n&&s.push(n),this.eventServer.request("event/contract/".concat(s.join("/"),"?since=").concat(t)).then(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?Ke.isArray(e)?i(null,e.map(function(e){return Ke.mapEvent(e)})):i(e):i("Unknown error occurred")}).catch(function(e){return i(e.response&&e.response.data||e)})):i("Invalid contract address provided")}},{key:"getEventByTransactionID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?(this.eventServer||t("No event server configured"),this.eventServer.request("event/transaction/".concat(e)).then(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?Ke.isArray(e)?t(null,e.map(function(e){return Ke.mapEvent(e)})):t(e):t("Unknown error occurred")}).catch(function(e){return t(e.response&&e.response.data||e)})):this.injectPromise(this.getEventByTransactionID,e)}},{key:"contract",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Ze(this,e,t)}},{key:"isConnected",value:function(){var e=v()(h.a.mark(function e(){var t,r=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0]){e.next=3;break}return e.abrupt("return",this.injectPromise(this.isConnected));case 3:return e.t0=t,e.next=6,this.fullNode.isConnected();case 6:return e.t1=e.sent,e.next=9,this.solidityNode.isConnected();case 9:if(e.t2=e.sent,e.t3=this.eventServer,!e.t3){e.next=15;break}return e.next=14,this.eventServer.isConnected();case 14:e.t3=e.sent;case 15:e.t4=e.t3,e.t5={fullNode:e.t1,solidityNode:e.t2,eventServer:e.t4},(0,e.t0)(null,e.t5);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}],[{key:"sha3",value:function(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"0x":"")+Object(ue.keccak256)(e)}},{key:"toHex",value:function(e){if(Ke.isBoolean(e))return t.fromDecimal(+e);if(Ke.isBigNumber(e))return t.fromDecimal(e);if("object"===c()(e))return t.fromUtf8(JSON.stringify(e));if(Ke.isString(e)){if(/^(-|)0x/.test(e))return e;if(!isFinite(e))return t.fromUtf8(e)}var r=t.fromDecimal(e);if("0xNaN"===r)throw new Error("The passed value is not convertible to a hex string");return r}},{key:"toUtf8",value:function(e){if(Ke.isHex(e))return e=e.replace(/^0x/,""),Buffer.from(e,"hex").toString("utf8");throw new Error("The passed value is not a valid hex string")}},{key:"fromUtf8",value:function(e){if(!Ke.isString(e))throw new Error("The passed value is not a valid utf-8 string");return"0x"+Buffer.from(e,"utf8").toString("hex")}},{key:"toAscii",value:function(e){if(Ke.isHex(e)){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}throw new Error("The passed value is not a valid hex string")}},{key:"fromAscii",value:function(e,t){if(!Ke.isString(e))throw new Error("The passed value is not a valid utf-8 string");return"0x"+Buffer.from(e,"ascii").toString("hex").padEnd(t,"0")}},{key:"toDecimal",value:function(e){return t.toBigNumber(e).toNumber()}},{key:"fromDecimal",value:function(e){var r=t.toBigNumber(e),n=r.toString(16);return r.isLessThan(0)?"-0x"+n.substr(1):"0x"+n}},{key:"fromSun",value:function(e){var r=t.toBigNumber(e).div(1e6);return Ke.isBigNumber(e)?r:r.toString(10)}},{key:"toSun",value:function(e){var r=t.toBigNumber(e).times(1e6);return Ke.isBigNumber(e)?r:r.toString(10)}},{key:"toBigNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Ke.isBigNumber(e)?e:Ke.isString(e)&&/^(-|)0x/.test(e)?new qe.a(e.replace("0x",""),16):new qe.a(e.toString(10),10)}},{key:"isAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Ke.isString(e))return!1;if(42===e.length)try{return t.isAddress(Ke.crypto.getBase58CheckAddress(Ke.code.hexStr2byteArray(e)))}catch(e){return!1}return Ke.crypto.isAddressValid(e)}},{key:"createAccount",value:function(){var e=v()(h.a.mark(function e(){var t,r,n=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],r=Ke.accounts.generateAccount(),t&&t(null,r),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"address",get:function(){return{fromHex:function(e){return Ke.isHex(e)?Ke.crypto.getBase58CheckAddress(Ke.code.hexStr2byteArray(e)):e},toHex:function(e){return Ke.isHex(e)?e.toLowerCase().replace(/^0x/,"41"):Ke.code.byteArray2hexStr(Ke.crypto.decodeBase58Address(e)).toLowerCase()},fromPrivateKey:function(e){try{return Ke.crypto.pkToAddress(e)}catch(e){return!1}}}}}]),t}(Oe.a);N()(Qe,"providers",Re),N()(Qe,"BigNumber",qe.a),N()(Qe,"TransactionBuilder",Ve),N()(Qe,"Trx",Me),N()(Qe,"Contract",Ze)}]).default;
//# sourceMappingURL=TronWeb.node.js.map